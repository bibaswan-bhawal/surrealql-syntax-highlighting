{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"scopeName": "source.surql",
	"name": "SurrealQL",
	"fileTypes": ["surql"],
	"patterns": [{ "include": "#surql" }],
	"repository": {
		"surql": {
			"patterns": [
				{ "include": "#surql-comment" },
				{ "include": "#surql-define-fragment" },
				{ "include": "#surql-type-single-string" },
				{ "include": "#surql-type-double-string" }
			]
		},
		"surql-comment": {
			"name": "comment.line.double-slash.surql",
			"match": "\\s*--.*\\s*"
		},
		"surql-type-name": {
			"name": "variable.parameter.surql",
			"begin": "(?<=(\\s+))(\\w+)",
			"end": "?=(\\s+)"
		},
		"surql-type-namespace": {
			"begin": "\\b(NAMESPACE|NS)\\b",
			"end": "(\\.*;)|(^(?:(?=[a-zA-Z])))",
			"beginCaptures": { "1": { "name": "storage.type.surql.namespace" } },
			"patterns": [
				{ "include": "#surql-comment" },
				{ "include": "#surql-type-name" }
			]
		},
		"surql-type-database": {
			"begin": "\\b(DATABASE|DB)\\b",
			"end": "(\\.*;)|(^(?:(?=[a-zA-Z])))",
			"beginCaptures": { "1": { "name": "storage.type.surql.database" } },
			"patterns": [
				{ "include": "#surql-comment" },
				{ "include": "#surql-type-name" }
			]
		},
		"surql-type-scope": {
			"begin": "\\b(SCOPE)\\b\\s*",
			"end": "\\s+",
			"captures": { "1": { "name": "storage.type.surql.scope" } },
			"patterns": [
				{ "include": "#surql-comment" },
				{ "include": "#surql-type-name" }
			]
		},
		"surql-type-single-string": {
			"name": "string.quoted.single.surql",
			"match": "'(.*?)'"
		},
		"surql-type-double-string": {
			"name": "string.quoted.double.surql",
			"match": "\"(.*?)\""
		},
		"surql-type-projection": {
			"match": "(.*)\\s+\\b(AS)\\b\\s+(\\w*)",
			"captures": {
				"1": { "name": "variable.parameter.surql.project_from" },
				"2": { "name": "storage.type.surql.projection" },
				"3": { "name": "variable.parameter.surql.project_to" }
			}
		},
		"surql-define-fragment": {
			"name": "meta.define.surql",
			"begin": "\\b(DEFINE)\\b",
			"end": "(\\.*;)|(^(?:(?=[a-zA-Z])))",
			"beginCaptures": { "1": { "name": "entity.name.function.surql.define" } },
			"patterns": [
				{ "include": "#surql-comment" },
				{ "include": "#surql-type-namespace" },
				{ "include": "#surql-type-database" },
				{
					"begin": "\\s*\\b(LOGIN)\\b",
					"end": "(\\s*;)|(^(?:(?=[a-zA-Z])))",
					"beginCaptures": { "1": { "name": "storage.type.surql.login" } },
					"patterns": [
						{ "include": "#surql-comment" },
						{ "include": "#surql-type-name" },
						{
							"begin": "\\s*\\b(ON)\\b",
							"end": "(\\s*;)|(^(?:(?=[a-zA-Z])))",
							"beginCaptures": { "1": { "name": "storage.modifier.surql.on" } },
							"patterns": [
								{ "include": "#surql-comment" },
								{
									"name": "entity.name.function.surql.namespace",
									"match": "\\b(NAMESPACE|NS)\\b"
								},
								{
									"name": "entity.name.function.surql.database",
									"match": "\\b(DATABASE|DB)\\b"
								},
								{
									"name": "storage.type.surql.PASSWORD",
									"match": "\\b(PASSWORD|PASSHASH)\\b"
								},
								{ "include": "#surql-type-single-string" },
								{ "include": "#surql-type-double-string" }
							]
						}
					]
				},
				{
					"begin": "\\s*\\b(TOKEN)\\b",
					"end": "(\\s*;)|(^(?:(?=[a-zA-Z])))",
					"beginCaptures": { "1": { "name": "storage.type.surql.token" } },
					"patterns": [
						{ "include": "#surql-comment" },
						{ "include": "#surql-type-name" },
						{
							"begin": "\\s*\\b(ON)\\b",
							"end": "(\\s*;)|(^(?:(?=[a-zA-Z])))",
							"beginCaptures": { "1": { "name": "storage.modifier.surql.on" } },
							"patterns": [
								{ "include": "#surql-comment" },
								{
									"name": "entity.name.function.surql.namespace",
									"match": "\\b(NAMESPACE|NS)\\b"
								},
								{
									"name": "entity.name.function.surql.database",
									"match": "\\b(DATABASE|DB)\\b"
								},
								{ "include": "#surql-type-scope" },
								{
									"match": "\\b(TYPE)\\b\\s+\\b(EDDSA|ES256|ES384|ES512|HS256|HS384|HS512|PS256|PS384|PS512|RS256|RS384|RS512)\\b",
									"captures": {
										"1": { "name": "storage.type.surql.crypto" },
										"2": { "name": "variable.language.surql.crypto" }
									}
								},
								{
									"name": "storage.type.surql.VALUE",
									"match": "\\b(VALUE)\\b"
								},
								{ "include": "#surql-type-single-string" },
								{ "include": "#surql-type-double-string" }
							]
						}
					]
				},
				{
					"begin": "\\s*\\b(SCOPE)\\b",
					"end": "(\\s*;)|(^(?:(?=[a-zA-Z])))",
					"beginCaptures": { "1": { "name": "storage.type.surql.scope" } },
					"patterns": [
						{ "include": "#surql-comment" },
						{ "include": "#surql-type-name" },
						{
							"match": "\\s*\\b(SESSION)\\s*(.*)\\b",
							"captures": {
								"1": { "name": "storage.type.surql.session" },
								"2": { "name": "variable.parameter.surql.duration" }
							}
						},
						{
							"match": "\\s*\\b(SIGNUP)\\s*(.*)\\b",
							"captures": {
								"1": { "name": "storage.type.surql.session" },
								"2": { "name": "variable.parameter.surql.duration" }
							}
						},
						{
							"match": "\\s*\\b(SIGNIN)\\s*(.*)\\b",
							"captures": {
								"1": { "name": "storage.type.surql.session" },
								"2": { "name": "variable.parameter.surql.duration" }
							}
						}
					]
				},
				{
					"begin": "\\s*\\b(TABLE)\\b",
					"end": "(\\s*;)|(^(?:(?=[a-zA-Z])))",
					"beginCaptures": { "1": { "name": "storage.type.surql.table" } },
					"patterns": [
						{ "include": "#surql-comment" },
						{ "include": "#surql-type-name" },
						{
							"name": "storage.modifier.surql.drop_table",
							"match": "\\s*\\b(DROP)\\b"
						},
						{
							"name": "storage.modifier.surql.schema_type",
							"match": "\\s*\\b(SCHEMAFULL|SCHEMALESS)\\b"
						},
						{
							"begin": "\\s*\\b(AS)\\b",
							"end": "(\\s*;)|(^(?:(?=[a-zA-Z])))",
							"beginCaptures": {
								"1": { "name": "storage.modifier.surql.as_select" }
							},
							"patterns": [
								{
									"begin": "\\s*\\b(SELECT)\\b",
									"end": "(^(?:(?=\\s*\\b(FROM)\\b)))|(\\s*;)|(^(?:(?=[a-zA-Z])))",
									"beginCaptures": {
										"1": { "name": "storage.modifier.surql.as_select" }
									},
									"patterns": [
										{ "include": "#surql-comment" },
										{ "include": "#surql-type-projection" }
									]
								},
								{
									"begin": "\\s*\\b(FROM)\\b",
									"end": "(^(?:(?=\\s*\\b(GROUP)\\b)))|(\\s*;)|(^(?:(?=[a-zA-Z])))",
									"beginCaptures": {
										"1": { "name": "storage.modifier.surql.as_select" }
									},
									"patterns": [
										{ "include": "#surql-comment" },
										{ "include": "#surql-type-name" }
									]
								},
								{
									"begin": "\\s*\\b(GROUP)\\b",
									"end": "(\\s*;)|(^(?:(?=[a-zA-Z])))",
									"beginCaptures": {
										"1": { "name": "storage.modifier.surql.as_select" }
									},
									"patterns": [
										{ "include": "#surql-comment" },
										{
											"name": "storage.modifier.surql.by",
											"match": "\\s*\\b(BY)\\b"
										},
										{ "include": "#surql-type-name" }
									]
								}
							]
						}
					]
				}
			]
		}
	}
}
